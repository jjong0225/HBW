<!doctype html>
<html lang="ko">

<head>
	<meta charset="utf-8">
	{% load staticfiles %}
	<link rel="shortcut icon" href="{% static "images/upper-logo.png" %}">
	<link rel="stylesheet" href="{% static "css/style.css" %}">
	<link rel="stylesheet" href="{% static "css/style-place.css" %}" type="text/css">
	<title>소프트웨어학부 복지사업</title>

	<script>
		//2개만 체크되게 하기
		function count_ck(obj) {
			var chkbox = document.getElementsByName("time");
			var chkCnt = 0;
			for (var i = 0; i < chkbox.length; i++) {
				if (chkbox[i].checked) {
					chkCnt++;
				}
			}
			if (chkCnt > 4) {
				alert("최대 2시간까지 예약 가능합니다.");
				obj.checked = false;
				return false;
			}
		}
	</script>
</head>

<body>
	<div class="container">
		<div class="header">
			<div class="logo">
				<img for="logo" src="{% static "images/header_logo.png" %}" alt="" usemap="#main_logo">
				<map name="main_logo">
					<area shape="rect" coords="5,5,250,80" href="{% url "login:main" %}" alt="메인메뉴로 가기">
				</map>
			</div>
            {% if user.is_authenticated %}
            <div class="login_button">
                    <a href="{% url "login:logout" %}"><img for ="logout_button" src="{% static "images/logout.png" %}" alt=""></a>
            </div>
            {% else %}
            <div class="login_button">
                <a href="{% url "login:login" %}">
                    <img for ="login_button" src="{% static "images/login.png" %}" alt=""></a>
            </div>
            {% endif %}

		</div>
		<div class="section">
			<div class="menu_bar">
				<ul>
					<li><a href="{% url "login:main" %}">홈</a></li>
					<li><a href="{% url "login:seltable" %}">실습실 예약</a></li>
					<li><a href="{% url "login:mypage" %}">마이페이지</a></li>
				</ul>
				<!-- <hr width="85%" color="black" 0.5px> -->
				<!-- <div class ="menu_bar_line">
							<img for="menu_bar" src="images/menu_bar.png" alt="">
							</div> -->
			</div>
			<div class="place_section">
				<div class="left_click">
					<div class="place">
						<div id="font">
							<h3>실습실 자리 배치도</h3>
						</div>
						<hr width="95%" color="black">
						<div class="place_image">
							<img for="place" src="{% static "images/place.png" %}" alt="">
						</div>
					</div>
					<div class="link_mypage">
						<h3>실습실 예약 취소는 <a href="{% url "login:mypage" %}">마이페이지</a>에서 가능합니다.</h3>
					</div>
				</div>
				<div class="right_click">
						<div class="place_click">
							<div id="font">
								<h3>자리 선택</h3>
							</div>
							<hr width="95%" color="black">
							<div id="table_div" class="reservation">
									<form id="table_sel" action="" method="post">{% csrf_token %}
										<div class="upper">
											<p>　</p>
											<p>     
													　　　　　　　　　　　　　　　　　　　　　　　　　　<input type="radio" id="desk1" value="1" name="desk"><label for="desk1"></label> 1     　<input type="radio" id="desk2" value="2" name="desk"><label for="desk2"></label> 2          　<input type="radio" id="desk3" value="3" name="desk"><label for="desk3"></label> 3         　 <input type="radio" id="desk4" value="4" name="desk"><label for="desk4"></label> 4       　   <input type="radio" id="desk5" value="5" name="desk"><label for="desk5"></label> 5        　  　
											</p>
											<p>	
													　　　　　　　　　　　　　　　　　　　　　　　　　　<input type="radio" id="desk6" value="6" name="desk"><label for="desk6"></label> 6     　<input type="radio" id="desk7" value="7" name="desk"><label for="desk7"></label> 7          　<input type="radio" id="desk8" value="8" name="desk"><label for="desk8"></label> 8         　 <input type="radio" id="desk9" value="9" name="desk"><label for="desk9"></label> 9       　   <input type="radio" id="desk10" value="10" name="desk"><label for="desk10"></label> 10     　
												
											</p>
										</div>					
										<div class="btn_time">
											<p>
												　　　　　<input type="submit" value="예약 가능시간 확인">												
										</p>
										</div>
									</form>
								</div>
							</div>
					<div class="lower">
						<div id="font">
							<h3>예약 시간 선택</h3>
						</div>
						<hr width="95%" color="black">
						<form action="{% url "login:lendtable" %}" method="POST" onsubmit="_submit(this);">{% csrf_token %}
							<div class="check_time">
								<p>
									<pre>			
										{% if tables %}
											{% spaceless %}
											{% for table in tables %}
												{% if table.is_borrowed == 0 %} 
													<input type="checkbox" id={{ "time"|add:table.start_time }} value={{ table.start_time }} name="time[]" onClick="count_ck(this)"><label for={{ "time"|add:table.start_time }}></label><input type="hidden" name="number[]" value={{ table.number }} />
												{% else %} 
													<input type="checkbox" checked disabled id={{ "time"|add:table.start_time }} value={{ table.start_time }} name="time[]" onClick="count_ck(this)"><label for={{ "time"|add:table.start_time }}></label><input type="hidden" name="number[]" value={{ table.number }} />
												{% endif %}
											{% endfor %}
											{% endspaceless %}
										{% else %}
											<p>좌석을 선택해 주세요</p>
										{% endif %}
									</pre>
								</p>
							</div>								
							<div class="btn_reservation">
								<p>
									<pre>
										<input type="submit" id="button" value="예약하기">
									</pre>
								</p>
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="footer">
					<div class="left_footer">
						<div class="tel">
							<p><strong>연락처</strong></p>
							<p><b>회장 </b>윤동주 010-xxxx-xxxx id</p>
							<p><b>부회장 </b>노진주 010-xxxx-xxxx id</p>
							<p><b>부회장 </b>김상엽 010-xxxx-xxxx id</p>
						</div>
					</div>
					<div class="right_footer">
						<p>　</p>
						<p>　</p>
						<p>　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　© 2019 All Rights Reserved.</p>
						<p>　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　<b>제작자</b> 김민근, 김 산, 이진우, 변지현, 안종훈, 최민성, 허예은</p>
					</div>
			</div>
</body>

<script language='JavaScript'>
    function _submit(f)
    {
        //같이 보낼 값 정리
        if (typeof(f.elements['time[]'].length) == 'undefined') //단일
        {
            if (f.elements['time[]'].checked==false)
            {
                f.elements['number[]'].disabled=true;
            }
        } else { //다중
            for (i=0; i<f.elements['time[]'].length; i++)
            {
                if (f.elements['time[]'][i].checked==false)
                {
                    f.elements['number[]'][i].disabled=true;
                }
            }
        }
        return true;
    }
	</script>
	
	<script language="JavaScript">
		function showInput() {
			document.getElementById('display').innerHTML = 
						document.getElementById("user_input").value;
		}
	  </script>
	</html>